{"ast":null,"code":"var _jsxFileName = \"D:\\\\BE COMP SS\\\\Final Year Project\\\\5\\\\land2\\\\land2\\\\client\\\\src\\\\views\\\\viewImage.js\";\nimport { ContractData, LoadingContainer } from '@drizzle/react-components';\nimport { DrizzleProvider } from '@drizzle/react-plugin';\nimport React, { Component } from 'react';\nimport { Spinner } from 'react-bootstrap'; // reactstrap components\n\nimport { Card, CardBody, Col, Row } from \"reactstrap\";\nimport Land from \"../artifacts/Land.json\";\nimport getWeb3 from \"../getWeb3\";\nimport imagedisplay from './3Dmodelling';\nimport \"../index.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst drizzleOptions = {\n  contracts: [Land]\n};\nvar verified;\nvar row = [];\nvar rowsIpfs = [];\n\nclass viewImage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.viewImage = landId => {\n      alert(landId);\n      this.props.history.push({\n        pathname: '/viewImage'\n      });\n    };\n\n    this.componentDidMount = async () => {\n      //For refreshing page only once\n      if (!window.location.hash) {\n        window.location = window.location + '#loaded';\n        window.location.reload();\n      }\n\n      try {\n        //Get network provider and web3 instance\n        const web3 = await getWeb3();\n        const accounts = await web3.eth.getAccounts();\n        const networkId = await web3.eth.net.getId();\n        const deployedNetwork = Land.networks[networkId];\n        const instance = new web3.eth.Contract(Land.abi, deployedNetwork && deployedNetwork.address);\n        const currentAddress = await web3.currentProvider.selectedAddress;\n        console.log(currentAddress);\n        this.setState({\n          LandInstance: instance,\n          web3: web3,\n          account: accounts[0]\n        });\n        verified = await this.state.LandInstance.methods.isVerified(currentAddress).call();\n        console.log(verified);\n        this.setState({\n          verified: verified\n        });\n        var registered = true;\n        this.setState({\n          registered: registered\n        });\n        var count = await this.state.LandInstance.methods.getLandsCount().call();\n        count = parseInt(count);\n        console.log(typeof count);\n        console.log(count); //this.setState({count:count});\n\n        var rowsArea = [];\n        var rowsCity = [];\n        var rowsState = [];\n        var rowsSt = [];\n        var rowsPrice = [];\n        var rowsPID = [];\n        var rowsSurvey = [];\n        var rowsIpfs = [];\n        var rowsDocs = [];\n\n        for (var i = 1; i < count + 1; i++) {\n          rowsArea.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getArea\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 23\n          }, this));\n          rowsCity.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getCity\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 23\n          }, this));\n          rowsState.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getState\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 24\n          }, this));\n          rowsSt.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getStatus\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this));\n          rowsPrice.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getPrice\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 24\n          }, this));\n          rowsPID.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getPID\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 22\n          }, this));\n          rowsSurvey.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getSurveyNumber\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)); // rowsIpfs.push((<ContractData contract=\"Land\" method=\"getImage\"  methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />));\n        }\n\n        for (i = 1; i < count + 1; i++) {\n          var landImg = await this.state.LandInstance.methods.getImage(i).call();\n          rowsIpfs.push(landImg);\n          var document = await this.state.LandInstance.methods.getDocument(i).call();\n          rowsDocs.push(document); // row.push(<> <Col xs=\"6\"><Card style={{textAlign: \"center\"}}>\n          //   <CardHeader><CardTitle><h2>Land {i}</h2></CardTitle></CardHeader>\n          // <CardBody><div><img src={`https://ipfs.io/ipfs/${landImg}`} alt=\"\" width=\"90%\" height=\"90%\" style={{marginBottom:\"10px\"}}/><p>Area: {rowsArea[i-1]}</p><p>City: {rowsCity[i-1]}</p><p>State: {rowsState[i-1]}</p><p>PID: {rowsPID[i-1]}</p><p>Price: {rowsPrice[i-1]}</p> \n          // </div></CardBody></Card></Col></>)\n\n          row.push( /*#__PURE__*/_jsxDEV(Col, {\n            xs: \"6\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"post-module\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"thumbnail\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"date\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"day\",\n                    children: i\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 121,\n                    columnNumber: 17\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 120,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `https://ipfs.io/${landImg}`,\n                  alt: \"nice\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 122,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 119,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"post-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"category\",\n                  children: \"Photos\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                  class: \"title\",\n                  children: [rowsArea[i - 1], \" Sq. m.\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n                  class: \"sub_title\",\n                  children: [rowsCity[i - 1], \", \", rowsState[i - 1]]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 128,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  class: \"description\",\n                  children: [\"PID: \", rowsPID[i - 1], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 59\n                  }, this), \" Survey No.: \", rowsSurvey[i - 1]]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"post-meta\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    class: \"timestamp\",\n                    children: [\"Price: \\u20B9 \", rowsPrice[i - 1]]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 38\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"post-meta\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    class: \"timestamp\",\n                    children: [\"View Verified Land  \", /*#__PURE__*/_jsxDEV(\"a\", {\n                      href: `https://landregistry.infura-ipfs.io/${document}`,\n                      target: \"_blank\",\n                      rel: \"noreferrer\",\n                      children: \"Document\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 131,\n                      columnNumber: 82\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 38\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 131,\n                  columnNumber: 15\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 20\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 15\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 18\n          }, this));\n        }\n\n        console.log(row);\n      } catch (error) {\n        // Catch any errors for any of the above operations.\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    };\n\n    this.state = {\n      LandInstance: undefined,\n      account: null,\n      web3: null,\n      flag: null,\n      verified: '',\n      registered: '',\n      count: 0,\n      id: ''\n    };\n  }\n\n  render() {\n    if (!this.state.web3) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: /*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\",\n              variant: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (!this.state.registered || !this.state.verified) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"6\",\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                children: /*#__PURE__*/_jsxDEV(CardBody, {\n                  children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: \"You are not verified to view this page\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 172,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 171,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(DrizzleProvider, {\n          options: drizzleOptions,\n          children: /*#__PURE__*/_jsxDEV(LoadingContainer, {\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: row\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this)\n    }, void 0, false);\n  }\n\n}\n\nexport default viewImage;","map":{"version":3,"sources":["D:/BE COMP SS/Final Year Project/5/land2/land2/client/src/views/viewImage.js"],"names":["ContractData","LoadingContainer","DrizzleProvider","React","Component","Spinner","Card","CardBody","Col","Row","Land","getWeb3","imagedisplay","drizzleOptions","contracts","verified","row","rowsIpfs","viewImage","constructor","props","landId","alert","history","push","pathname","componentDidMount","window","location","hash","reload","web3","accounts","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","currentAddress","currentProvider","selectedAddress","console","log","setState","LandInstance","account","state","methods","isVerified","call","registered","count","getLandsCount","parseInt","rowsArea","rowsCity","rowsState","rowsSt","rowsPrice","rowsPID","rowsSurvey","rowsDocs","i","from","landImg","getImage","document","getDocument","error","undefined","flag","id","render"],"mappings":"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","sourcesContent":["import {\r\n  ContractData, LoadingContainer\r\n} from '@drizzle/react-components';\r\nimport { DrizzleProvider } from '@drizzle/react-plugin';\r\nimport React, { Component } from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\n// reactstrap components\r\nimport {\r\n  Card, CardBody, Col, Row\r\n} from \"reactstrap\";\r\nimport Land from \"../artifacts/Land.json\";\r\nimport getWeb3 from \"../getWeb3\";\r\nimport imagedisplay from './3Dmodelling';\r\nimport \"../index.css\";\r\n\r\n\r\n\r\nconst drizzleOptions = {\r\n  contracts: [Land]\r\n}\r\n\r\nvar verified;\r\nvar row = [];\r\nvar rowsIpfs = [];\r\n\r\nclass viewImage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      LandInstance: undefined,\r\n      account: null,\r\n      web3: null,\r\n      flag: null,\r\n      verified: '',\r\n      registered: '',\r\n      count: 0,\r\n      id: '',\r\n    }\r\n  }\r\n\r\n  viewImage = (landId) => {\r\n    alert(landId);\r\n    this.props.history.push({\r\n      pathname: '/viewImage',\r\n    })\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    //For refreshing page only once\r\n    if (!window.location.hash) {\r\n      window.location = window.location + '#loaded';\r\n      window.location.reload();\r\n    }\r\n\r\n    try {\r\n      //Get network provider and web3 instance\r\n      const web3 = await getWeb3();\r\n\r\n      const accounts = await web3.eth.getAccounts();\r\n\r\n      const networkId = await web3.eth.net.getId();\r\n      const deployedNetwork = Land.networks[networkId];\r\n      const instance = new web3.eth.Contract(\r\n        Land.abi,\r\n        deployedNetwork && deployedNetwork.address,\r\n      );\r\n\r\n      const currentAddress = await web3.currentProvider.selectedAddress;\r\n      console.log(currentAddress);\r\n      this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\r\n      verified = await this.state.LandInstance.methods.isVerified(currentAddress).call();\r\n      console.log(verified);\r\n      this.setState({ verified: verified });\r\n      var registered = true;\r\n      this.setState({ registered: registered });\r\n\r\n      var count = await this.state.LandInstance.methods.getLandsCount().call();\r\n      count = parseInt(count);\r\n      console.log(typeof (count));\r\n      console.log(count);\r\n      //this.setState({count:count});\r\n\r\n      var rowsArea = [];\r\n      var rowsCity = [];\r\n      var rowsState = [];\r\n      var rowsSt = [];\r\n      var rowsPrice = [];\r\n      var rowsPID = [];\r\n      var rowsSurvey = [];\r\n      var rowsIpfs = [];\r\n      var rowsDocs = [];\r\n\r\n      for (var i = 1; i < count + 1; i++) {\r\n        rowsArea.push(<ContractData contract=\"Land\" method=\"getArea\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n        rowsCity.push(<ContractData contract=\"Land\" method=\"getCity\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n        rowsState.push(<ContractData contract=\"Land\" method=\"getState\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n        rowsSt.push(<ContractData contract=\"Land\" method=\"getStatus\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n        rowsPrice.push(<ContractData contract=\"Land\" method=\"getPrice\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n        rowsPID.push(<ContractData contract=\"Land\" method=\"getPID\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n        rowsSurvey.push(<ContractData contract=\"Land\" method=\"getSurveyNumber\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n        // rowsIpfs.push((<ContractData contract=\"Land\" method=\"getImage\"  methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />));\r\n      }\r\n\r\n\r\n      for ( i = 1; i < count + 1; i++) {\r\n        var landImg = await this.state.LandInstance.methods.getImage(i).call();\r\n        rowsIpfs.push(landImg)\r\n        var document = await this.state.LandInstance.methods.getDocument(i).call();\r\n        rowsDocs.push(document);\r\n        // row.push(<> <Col xs=\"6\"><Card style={{textAlign: \"center\"}}>\r\n        //   <CardHeader><CardTitle><h2>Land {i}</h2></CardTitle></CardHeader>\r\n        // <CardBody><div><img src={`https://ipfs.io/ipfs/${landImg}`} alt=\"\" width=\"90%\" height=\"90%\" style={{marginBottom:\"10px\"}}/><p>Area: {rowsArea[i-1]}</p><p>City: {rowsCity[i-1]}</p><p>State: {rowsState[i-1]}</p><p>PID: {rowsPID[i-1]}</p><p>Price: {rowsPrice[i-1]}</p> \r\n        // </div></CardBody></Card></Col></>)\r\n        row.push(<Col xs=\"6\">\r\n\r\n          <div class=\"post-module\">\r\n\r\n            <div class=\"thumbnail\">\r\n              <div class=\"date\">\r\n                <div class=\"day\">{i}</div>\r\n              </div><img src={`https://ipfs.io/${landImg}`} alt=\"nice\" />\r\n            </div>\r\n\r\n            <div class=\"post-content\">\r\n              <div class=\"category\">Photos</div>\r\n              <h1 class=\"title\">{rowsArea[i - 1]} Sq. m.</h1>\r\n              <h2 class=\"sub_title\">{rowsCity[i - 1]}, {rowsState[i - 1]}</h2>\r\n              <p class=\"description\">PID: {rowsPID[i - 1]}<br /> Survey No.: {rowsSurvey[i - 1]}</p>\r\n              <div class=\"post-meta\"><span class=\"timestamp\">Price: â‚¹ {rowsPrice[i - 1]}</span></div>\r\n              <div class=\"post-meta\"><span class=\"timestamp\">View Verified Land  <a href={`https://landregistry.infura-ipfs.io/${document}`} target=\"_blank\" rel=\"noreferrer\">Document</a></span></div>\r\n              <div><button></button></div>\r\n            </div>\r\n          </div>\r\n        </Col>)\r\n      }\r\n      console.log(row)\r\n\r\n\r\n\r\n    } catch (error) {\r\n      // Catch any errors for any of the above operations.\r\n      alert(\r\n        `Failed to load web3, accounts, or contract. Check console for details.`,\r\n      );\r\n      console.error(error);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (!this.state.web3) {\r\n      return (\r\n        <div>\r\n          <div>\r\n            <h1>\r\n              <Spinner animation=\"border\" variant=\"primary\" />\r\n            </h1>\r\n          </div>\r\n\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (!this.state.registered || !this.state.verified) {\r\n      return (\r\n        <div className=\"content\">\r\n          <div>\r\n            <Row>\r\n              <Col xs=\"6\">\r\n                <Card>\r\n                  <CardBody>\r\n                    <h1>\r\n                      You are not verified to view this page\r\n                    </h1>\r\n                  </CardBody>\r\n                </Card>\r\n              </Col>\r\n            </Row>\r\n          </div>\r\n\r\n        </div>\r\n      );\r\n    }\r\n\r\n\r\n    return (\r\n      <>\r\n        <div className=\"content\">\r\n          <DrizzleProvider options={drizzleOptions}>\r\n            <LoadingContainer>\r\n\r\n              <Row>\r\n\r\n                {row}\r\n\r\n              </Row>\r\n            </LoadingContainer>\r\n          </DrizzleProvider>\r\n\r\n        </div>\r\n      </>\r\n\r\n    );\r\n\r\n  }\r\n}\r\n\r\nexport default viewImage;"]},"metadata":{},"sourceType":"module"}