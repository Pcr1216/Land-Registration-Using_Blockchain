{"ast":null,"code":"var _jsxFileName = \"D:\\\\BE COMP SS\\\\Final Year Project\\\\5\\\\land2\\\\land2\\\\client\\\\src\\\\views\\\\TransactionInfo.js\";\nimport { ContractData, LoadingContainer } from '@drizzle/react-components';\nimport { DrizzleProvider } from '@drizzle/react-plugin';\nimport React, { Component } from 'react';\nimport { Spinner } from 'react-bootstrap'; // reactstrap components\n\nimport { Button, Card, CardBody, CardHeader, CardTitle, Col, Row, Table } from \"reactstrap\";\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport Land from \"../artifacts/Land.json\";\nimport getWeb3 from \"../getWeb3\";\nimport '../index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst drizzleOptions = {\n  contracts: [Land]\n};\nvar landTable = [];\nvar completed = true;\n\nclass TransactionInfo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.landTransfer = (landId, newOwner) => async () => {\n      await this.state.LandInstance.methods.LandOwnershipTransfer(landId, newOwner).send({\n        from: this.state.account,\n        gas: 2100000\n      }); //Reload\n\n      console.log(newOwner);\n      console.log(completed); // this.setState({completed:false});\n\n      completed = false;\n      console.log(completed);\n      window.location.reload(false);\n    };\n\n    this.componentDidMount = async () => {\n      //For refreshing page only once\n      if (!window.location.hash) {\n        window.location = window.location + '#loaded';\n        window.location.reload();\n      }\n\n      try {\n        //Get network provider and web3 instance\n        const web3 = await getWeb3();\n        const accounts = await web3.eth.getAccounts();\n        const currentAddress = await web3.currentProvider.selectedAddress; //console.log(currentAddress);\n\n        const networkId = await web3.eth.net.getId();\n        const deployedNetwork = Land.networks[networkId];\n        const instance = new web3.eth.Contract(Land.abi, deployedNetwork && deployedNetwork.address);\n        this.setState({\n          LandInstance: instance,\n          web3: web3,\n          account: accounts[0]\n        });\n        var verified = await this.state.LandInstance.methods.isLandInspector(currentAddress).call(); //console.log(verified);\n\n        this.setState({\n          verified: verified\n        });\n        var count = await this.state.LandInstance.methods.getLandsCount().call();\n        count = parseInt(count);\n        var rowsArea = [];\n        var rowsCity = [];\n        var rowsState = [];\n        var rowsPrice = [];\n        var rowsPID = [];\n        var rowsSurvey = [];\n\n        for (var i = 1; i < count + 1; i++) {\n          rowsArea.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getArea\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 31\n          }, this));\n          rowsCity.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getCity\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 31\n          }, this));\n          rowsState.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getState\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 32\n          }, this));\n          rowsPrice.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getPrice\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 32\n          }, this));\n          rowsPID.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getPID\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 30\n          }, this));\n          rowsSurvey.push( /*#__PURE__*/_jsxDEV(ContractData, {\n            contract: \"Land\",\n            method: \"getSurveyNumber\",\n            methodArgs: [i, {\n              from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\"\n            }]\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 33\n          }, this));\n        }\n\n        for (i = 0; i < count; i++) {\n          var request = await this.state.LandInstance.methods.getRequestDetails(i + 1).call();\n          var approved = await this.state.LandInstance.methods.isApproved(i + 1).call(); // console.log(approved);\n          // console.log(request[3]);\n\n          var disabled = request[3] && completed;\n          console.log(\"Disabled: \", disabled);\n          console.log(\"request[3]: \", request[3]);\n          console.log(\"completed: \", completed);\n          var owner = await this.state.LandInstance.methods.getLandOwner(i + 1).call();\n          landTable.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: i + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 36\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: owner\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 52\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: rowsArea[i]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 68\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: rowsCity[i]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 90\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: rowsState[i]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 112\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: rowsPrice[i]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 135\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: rowsPID[i]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 158\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: rowsSurvey[i]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 179\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: this.landTransfer(i + 1, request[1]),\n                disabled: !disabled,\n                className: \"button-vote\",\n                children: \"Verify Transaction\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 32\n          }, this));\n        }\n      } catch (error) {\n        // Catch any errors for any of the above operations.\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    };\n\n    this.state = {\n      LandInstance: undefined,\n      account: null,\n      web3: null,\n      verified: ''\n    };\n  }\n\n  render() {\n    if (!this.state.web3) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: /*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\",\n              variant: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (!this.state.verified) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"6\",\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                className: \"card-chart\",\n                children: /*#__PURE__*/_jsxDEV(CardBody, {\n                  children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: \"You are not verified to view this page\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 160,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(DrizzleProvider, {\n      options: drizzleOptions,\n      children: /*#__PURE__*/_jsxDEV(LoadingContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"12\",\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                  children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                    tag: \"h6\",\n                    children: \"Lands Info\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 181,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 180,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n                  children: /*#__PURE__*/_jsxDEV(Table, {\n                    className: \"tablesorter\",\n                    responsive: true,\n                    color: \"black\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      className: \"text-primary\",\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"#\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 187,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Owner ID\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 188,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Area\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 189,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"City\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 190,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"State\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 191,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Price\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 192,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Property PID\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 193,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Survey Number\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 194,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Verify Land Transfer\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 195,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 186,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 185,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: landTable\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 184,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default TransactionInfo;","map":{"version":3,"sources":["D:/BE COMP SS/Final Year Project/5/land2/land2/client/src/views/TransactionInfo.js"],"names":["ContractData","LoadingContainer","DrizzleProvider","React","Component","Spinner","Button","Card","CardBody","CardHeader","CardTitle","Col","Row","Table","Land","getWeb3","drizzleOptions","contracts","landTable","completed","TransactionInfo","constructor","props","landTransfer","landId","newOwner","state","LandInstance","methods","LandOwnershipTransfer","send","from","account","gas","console","log","window","location","reload","componentDidMount","hash","web3","accounts","eth","getAccounts","currentAddress","currentProvider","selectedAddress","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","setState","verified","isLandInspector","call","count","getLandsCount","parseInt","rowsArea","rowsCity","rowsState","rowsPrice","rowsPID","rowsSurvey","i","push","request","getRequestDetails","approved","isApproved","disabled","owner","getLandOwner","error","alert","undefined","render"],"mappings":"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","sourcesContent":["import {\r\n    ContractData, LoadingContainer\r\n} from '@drizzle/react-components';\r\nimport { DrizzleProvider } from '@drizzle/react-plugin';\r\nimport React, { Component } from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\n// reactstrap components\r\nimport {\r\n    Button, Card, CardBody, CardHeader, CardTitle, Col, Row, Table\r\n} from \"reactstrap\";\r\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\r\nimport Land from \"../artifacts/Land.json\";\r\nimport getWeb3 from \"../getWeb3\";\r\nimport '../index.css';\r\n\r\n\r\n\r\nconst drizzleOptions = {\r\n    contracts: [Land]\r\n}\r\n\r\n\r\nvar landTable = [];\r\nvar completed = true;\r\n\r\nclass TransactionInfo extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            LandInstance: undefined,\r\n            account: null,\r\n            web3: null,\r\n            verified: '',\r\n        }\r\n    }\r\n\r\n    landTransfer = (landId, newOwner) => async () => {\r\n\r\n        await this.state.LandInstance.methods.LandOwnershipTransfer(\r\n            landId, newOwner\r\n        ).send({\r\n            from: this.state.account,\r\n            gas: 2100000\r\n        });\r\n        //Reload\r\n        console.log(newOwner);\r\n        console.log(completed);\r\n        // this.setState({completed:false});\r\n        completed = false;\r\n        console.log(completed);\r\n\r\n        window.location.reload(false);\r\n\r\n    }\r\n\r\n\r\n    componentDidMount = async () => {\r\n        //For refreshing page only once\r\n        if (!window.location.hash) {\r\n            window.location = window.location + '#loaded';\r\n            window.location.reload();\r\n        }\r\n\r\n        try {\r\n            //Get network provider and web3 instance\r\n            const web3 = await getWeb3();\r\n\r\n            const accounts = await web3.eth.getAccounts();\r\n\r\n            const currentAddress = await web3.currentProvider.selectedAddress;\r\n            //console.log(currentAddress);\r\n            const networkId = await web3.eth.net.getId();\r\n            const deployedNetwork = Land.networks[networkId];\r\n            const instance = new web3.eth.Contract(\r\n                Land.abi,\r\n                deployedNetwork && deployedNetwork.address,\r\n            );\r\n\r\n            this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\r\n\r\n            var verified = await this.state.LandInstance.methods.isLandInspector(currentAddress).call();\r\n            //console.log(verified);\r\n            this.setState({ verified: verified });\r\n\r\n            var count = await this.state.LandInstance.methods.getLandsCount().call();\r\n            count = parseInt(count);\r\n            var rowsArea = [];\r\n            var rowsCity = [];\r\n            var rowsState = [];\r\n            var rowsPrice = [];\r\n            var rowsPID = [];\r\n            var rowsSurvey = [];\r\n\r\n\r\n            for (var i = 1; i < count + 1; i++) {\r\n                rowsArea.push(<ContractData contract=\"Land\" method=\"getArea\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n                rowsCity.push(<ContractData contract=\"Land\" method=\"getCity\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n                rowsState.push(<ContractData contract=\"Land\" method=\"getState\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n                rowsPrice.push(<ContractData contract=\"Land\" method=\"getPrice\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n                rowsPID.push(<ContractData contract=\"Land\" method=\"getPID\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n                rowsSurvey.push(<ContractData contract=\"Land\" method=\"getSurveyNumber\" methodArgs={[i, { from: \"0xa42A8B478E5e010609725C2d5A8fe6c0C4A939cB\" }]} />);\r\n            }\r\n            for ( i = 0; i < count; i++) {\r\n                var request = await this.state.LandInstance.methods.getRequestDetails(i + 1).call();\r\n                var approved = await this.state.LandInstance.methods.isApproved(i + 1).call();\r\n                // console.log(approved);\r\n                // console.log(request[3]);\r\n                var disabled = request[3] && completed;\r\n                console.log(\"Disabled: \", disabled);\r\n                console.log(\"request[3]: \", request[3]);\r\n                console.log(\"completed: \", completed);\r\n\r\n                var owner = await this.state.LandInstance.methods.getLandOwner(i + 1).call();\r\n                landTable.push(<tr><td>{i + 1}</td><td>{owner}</td><td>{rowsArea[i]}</td><td>{rowsCity[i]}</td><td>{rowsState[i]}</td><td>{rowsPrice[i]}</td><td>{rowsPID[i]}</td><td>{rowsSurvey[i]}</td>\r\n                    <td>\r\n                        <Button onClick={this.landTransfer(i + 1, request[1])} disabled={!disabled} className=\"button-vote\">\r\n                            Verify Transaction\r\n                        </Button>\r\n                    </td>\r\n                </tr>)\r\n\r\n\r\n            }\r\n\r\n\r\n        } catch (error) {\r\n            // Catch any errors for any of the above operations.\r\n            alert(\r\n                `Failed to load web3, accounts, or contract. Check console for details.`,\r\n            );\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        if (!this.state.web3) {\r\n            return (\r\n                <div>\r\n                    <div>\r\n                        <h1>\r\n                            <Spinner animation=\"border\" variant=\"primary\" />\r\n                        </h1>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!this.state.verified) {\r\n            return (\r\n                <div className=\"content\">\r\n                    <div>\r\n                        <Row>\r\n                            <Col xs=\"6\">\r\n                                <Card className=\"card-chart\">\r\n                                    <CardBody>\r\n                                        <h1>\r\n                                            You are not verified to view this page\r\n                                        </h1>\r\n                                    </CardBody>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <DrizzleProvider options={drizzleOptions}>\r\n                <LoadingContainer>\r\n                    <div className=\"content\">\r\n                        <Row>\r\n                            <Col xs=\"12\">\r\n                                <Card>\r\n                                    <CardHeader>\r\n                                        <CardTitle tag=\"h6\">Lands Info</CardTitle>\r\n                                    </CardHeader>\r\n                                    <CardBody>\r\n                                        <Table className=\"tablesorter\" responsive color=\"black\">\r\n                                            <thead className=\"text-primary\">\r\n                                                <tr>\r\n                                                    <th>#</th>\r\n                                                    <th>Owner ID</th>\r\n                                                    <th>Area</th>\r\n                                                    <th>City</th>\r\n                                                    <th>State</th>\r\n                                                    <th>Price</th>\r\n                                                    <th>Property PID</th>\r\n                                                    <th>Survey Number</th>\r\n                                                    <th>Verify Land Transfer</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                {landTable}\r\n                                            </tbody>\r\n                                        </Table>\r\n                                    </CardBody>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n\r\n                    </div>\r\n                </LoadingContainer>\r\n            </DrizzleProvider>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default TransactionInfo;\r\n"]},"metadata":{},"sourceType":"module"}