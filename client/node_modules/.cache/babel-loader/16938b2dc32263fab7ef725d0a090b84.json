{"ast":null,"code":"var _jsxFileName = \"D:\\\\BE COMP SS\\\\Final Year Project\\\\5\\\\land2\\\\land2\\\\client\\\\src\\\\RegisterSeller.js\";\nimport React, { Component } from 'react';\nimport LandContract from \"./artifacts/Land.json\";\nimport getWeb3 from \"./getWeb3\";\nimport ipfs from './ipfs';\nimport { FormGroup, FormControl, Button, Spinner, FormFile } from 'react-bootstrap'; //import Navigation from './Navigation'\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass RegisterSeller extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      //For refreshing page only once\n      if (!window.location.hash) {\n        window.location = window.location + '#loaded';\n        window.location.reload();\n      }\n\n      try {\n        //Get network provider and web3 instance\n        const web3 = await getWeb3();\n        const accounts = await web3.eth.getAccounts();\n        const networkId = await web3.eth.net.getId();\n        const deployedNetwork = LandContract.networks[networkId];\n        const instance = new web3.eth.Contract(LandContract.abi, deployedNetwork && deployedNetwork.address);\n        this.setState({\n          LandInstance: instance,\n          web3: web3,\n          account: accounts[0]\n        });\n      } catch (error) {\n        // Catch any errors for any of the above operations.\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    };\n\n    this.addDoc = async () => {\n      // alert('In add image')\n      await ipfs.files.add(this.state.buffer2, (error, result) => {\n        if (error) {\n          alert(error);\n          return;\n        }\n\n        alert(result[0].hash);\n        this.setState({\n          document: result[0].hash\n        });\n        console.log('document:', this.state.document);\n      });\n    };\n\n    this.registerSeller = async () => {\n      this.addDoc(); // alert('After add image')\n\n      await new Promise(resolve => setTimeout(resolve, 10000));\n\n      if (this.state.name === '' || this.state.age === '' || this.state.idNo === '' || this.state.kraPin === '' || this.state.landsOwned === '') {\n        alert(\"All the fields are compulsory!\");\n      } else if (!Number(this.state.idNo) || this.state.idNo.length !== 12) {\n        alert(\"Aadhar Number should be 12 digits long!\");\n      } else if (this.state.kraPin.length !== 10) {\n        alert(\"Pan Card should be a 10 digit unique number!\");\n      } else if (!Number(this.state.age) || this.state.age < 21) {\n        alert(\"Your age must be older than 21\");\n      } else {\n        await this.state.LandInstance.methods.registerSeller(this.state.name, this.state.age, this.state.idNo, this.state.kraPin, this.state.landsOwned, this.state.document).send({\n          from: this.state.account,\n          gas: 2100000\n        }).then(response => {\n          this.props.history.push(\"/Seller/SellerDashboard\");\n        }); //Reload\n\n        window.location.reload(false);\n      }\n    };\n\n    this.updateName = event => this.setState({\n      name: event.target.value\n    });\n\n    this.updateAge = event => this.setState({\n      age: event.target.value\n    });\n\n    this.updateIdno = event => this.setState({\n      idNo: event.target.value\n    });\n\n    this.updateKra = event => this.setState({\n      kraPin: event.target.value\n    });\n\n    this.updateOwnedLands = event => this.setState({\n      landsOwned: event.target.value\n    });\n\n    this.state = {\n      LandInstance: undefined,\n      account: null,\n      web3: null,\n      name: '',\n      age: '',\n      idNo: '',\n      kraPin: '',\n      landsOwned: '',\n      isVerified: false,\n      buffer2: null,\n      document: ''\n    };\n    this.captureDoc = this.captureDoc.bind(this);\n    this.addDoc = this.addDoc.bind(this);\n  }\n\n  captureDoc(event) {\n    event.preventDefault();\n    const file2 = event.target.files[0];\n    const reader2 = new window.FileReader();\n    reader2.readAsArrayBuffer(file2);\n\n    reader2.onloadend = () => {\n      this.setState({\n        buffer2: Buffer(reader2.result)\n      });\n      console.log('buffer2', this.state.buffer2);\n    };\n\n    console.log('caoture doc...');\n  }\n\n  render() {\n    if (!this.state.web3) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"img-wrapper\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"https://i.pinimg.com/originals/71/6e/00/716e00537e8526347390d64ec900107d.png\",\n            className: \"logo\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"wine-text-container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"site-title wood-text\",\n              children: \"Land Registry\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"auth-inner\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  children: /*#__PURE__*/_jsxDEV(Spinner, {\n                    animation: \"border\",\n                    variant: \"warning\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 151,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 150,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bodyC\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"img-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"wine-text-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"site-title wood-text\",\n            children: \"Land Registry\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-wrapper\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"auth-inner\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"App\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                  style: {\n                    color: \"black\"\n                  },\n                  children: \"Seller Registration\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 177,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form\",\n              children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-label\",\n                  children: \"Enter Name --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-input\",\n                  children: /*#__PURE__*/_jsxDEV(FormControl, {\n                    input: \"text\",\n                    value: this.state.name,\n                    onChange: this.updateName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-label\",\n                  children: \"Enter Age --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-input\",\n                  children: /*#__PURE__*/_jsxDEV(FormControl, {\n                    input: \"text\",\n                    value: this.state.age,\n                    onChange: this.updateAge\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-label\",\n                  children: \"Enter Aadhar Card No --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-input\",\n                  children: /*#__PURE__*/_jsxDEV(FormControl, {\n                    input: \"text\",\n                    value: this.state.idNo,\n                    onChange: this.updateIdno\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 217,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-label\",\n                  children: \"Enter Pan Card No --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-input\",\n                  children: /*#__PURE__*/_jsxDEV(FormControl, {\n                    input: \"text\",\n                    value: this.state.kraPin,\n                    onChange: this.updateKra\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 230,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-label\",\n                  children: \"Enter Owned Lands --\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-input\",\n                  children: /*#__PURE__*/_jsxDEV(FormControl, {\n                    input: \"text\",\n                    value: this.state.landsOwned,\n                    onChange: this.updateOwnedLands\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 243,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Attach your ID Card (PDF Format)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(FormFile, {\n                  id: \"File2\",\n                  onChange: this.captureDoc\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: this.registerSeller,\n                className: \"button-vote\",\n                children: \"Register as Seller\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 260,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default RegisterSeller;","map":{"version":3,"sources":["D:/BE COMP SS/Final Year Project/5/land2/land2/client/src/RegisterSeller.js"],"names":["React","Component","LandContract","getWeb3","ipfs","FormGroup","FormControl","Button","Spinner","FormFile","RegisterSeller","constructor","props","componentDidMount","window","location","hash","reload","web3","accounts","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","setState","LandInstance","account","error","alert","console","addDoc","files","add","state","buffer2","result","document","log","registerSeller","Promise","resolve","setTimeout","name","age","idNo","kraPin","landsOwned","Number","length","methods","send","from","gas","then","response","history","push","updateName","event","target","value","updateAge","updateIdno","updateKra","updateOwnedLands","undefined","isVerified","captureDoc","bind","preventDefault","file2","reader2","FileReader","readAsArrayBuffer","onloadend","Buffer","render","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport LandContract from \"./artifacts/Land.json\"\r\nimport getWeb3 from \"./getWeb3\"\r\nimport ipfs from './ipfs';\r\n\r\nimport { FormGroup, FormControl, Button, Spinner, FormFile } from 'react-bootstrap'\r\n\r\n//import Navigation from './Navigation'\r\n\r\nclass RegisterSeller extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            LandInstance: undefined,\r\n            account: null,\r\n            web3: null,\r\n            name: '',\r\n            age: '',\r\n            idNo: '',\r\n            kraPin: '',\r\n            landsOwned: '',\r\n            isVerified: false,\r\n            buffer2: null,\r\n            document: '',\r\n        }\r\n        this.captureDoc = this.captureDoc.bind(this);\r\n        this.addDoc = this.addDoc.bind(this);\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        //For refreshing page only once\r\n        if (!window.location.hash) {\r\n            window.location = window.location + '#loaded';\r\n            window.location.reload();\r\n        }\r\n\r\n        try {\r\n            //Get network provider and web3 instance\r\n            const web3 = await getWeb3();\r\n\r\n            const accounts = await web3.eth.getAccounts();\r\n\r\n            const networkId = await web3.eth.net.getId();\r\n            const deployedNetwork = LandContract.networks[networkId];\r\n            const instance = new web3.eth.Contract(\r\n                LandContract.abi,\r\n                deployedNetwork && deployedNetwork.address,\r\n            );\r\n\r\n            this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\r\n\r\n\r\n        } catch (error) {\r\n            // Catch any errors for any of the above operations.\r\n            alert(\r\n                `Failed to load web3, accounts, or contract. Check console for details.`,\r\n            );\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    addDoc = async () => {\r\n        // alert('In add image')\r\n        await ipfs.files.add(this.state.buffer2, (error, result) => {\r\n          if (error) {\r\n            alert(error)\r\n            return\r\n          }\r\n    \r\n          alert(result[0].hash)\r\n          this.setState({ document: result[0].hash });\r\n          console.log('document:', this.state.document);\r\n        })\r\n      }\r\n\r\n    registerSeller = async () => {\r\n        this.addDoc();\r\n        // alert('After add image')\r\n        await new Promise(resolve => setTimeout(resolve, 10000));\r\n        if (this.state.name === '' || this.state.age === '' || this.state.idNo === '' || this.state.kraPin === '' || this.state.landsOwned === '') {\r\n            alert(\"All the fields are compulsory!\");\r\n        } else if (!Number(this.state.idNo) || this.state.idNo.length !== 12) {\r\n            alert(\"Aadhar Number should be 12 digits long!\");\r\n        } else if (this.state.kraPin.length !== 10) {\r\n            alert(\"Pan Card should be a 10 digit unique number!\");\r\n        } else if (!Number(this.state.age) || this.state.age < 21) {\r\n            alert(\"Your age must be older than 21\");\r\n        } else {\r\n            await this.state.LandInstance.methods.registerSeller(\r\n                this.state.name,\r\n                this.state.age,\r\n                this.state.idNo,\r\n                this.state.kraPin,\r\n                this.state.landsOwned, \r\n                this.state.document)\r\n                .send({\r\n                    from: this.state.account,\r\n                    gas: 2100000\r\n                }).then(response => {\r\n                    this.props.history.push(\"/Seller/SellerDashboard\");\r\n                });\r\n\r\n            //Reload\r\n            window.location.reload(false);\r\n        }\r\n    }\r\n\r\n    updateName = event => (\r\n        this.setState({ name: event.target.value })\r\n    )\r\n    updateAge = event => (\r\n        this.setState({ age: event.target.value })\r\n    )\r\n    updateIdno = event => (\r\n        this.setState({ idNo: event.target.value })\r\n    )\r\n    updateKra = event => (\r\n        this.setState({ kraPin: event.target.value })\r\n    )\r\n    updateOwnedLands = event => (\r\n        this.setState({ landsOwned: event.target.value })\r\n    )\r\n    captureDoc(event) {\r\n        event.preventDefault()\r\n        const file2 = event.target.files[0]\r\n        const reader2 = new window.FileReader()\r\n        reader2.readAsArrayBuffer(file2)\r\n        reader2.onloadend = () => {\r\n          this.setState({ buffer2: Buffer(reader2.result) })\r\n          console.log('buffer2', this.state.buffer2)\r\n        }\r\n        console.log('caoture doc...')\r\n      }\r\n\r\n    render() {\r\n        if (!this.state.web3) {\r\n            return (\r\n                <div>\r\n                    <div className=\"img-wrapper\">\r\n                        <img src=\"https://i.pinimg.com/originals/71/6e/00/716e00537e8526347390d64ec900107d.png\" className=\"logo\" alt=\"\"/>\r\n                        <div className=\"wine-text-container\">\r\n                            <div className=\"site-title wood-text\">Land Registry</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"auth-wrapper\">\r\n                        <div className=\"auth-inner\">\r\n                            <div>\r\n                                <div>\r\n                                    <h1>\r\n                                        <Spinner animation=\"border\" variant=\"warning\" />\r\n                                    </h1>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"bodyC\">\r\n\r\n                <div className=\"img-wrapper\">\r\n                    {/* <img src=\"https://i.pinimg.com/originals/71/6e/00/716e00537e8526347390d64ec900107d.png\" className=\"logo\" alt=\"\" /> */}\r\n                    <div className=\"wine-text-container\">\r\n                        <div className=\"site-title wood-text\">Land Registry</div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"auth-wrapper\">\r\n                    <div className=\"auth-inner\">\r\n                        <div className=\"App\">\r\n\r\n                            <div>\r\n                                <div>\r\n                                    <h1 style={{ color: \"black\" }}>\r\n                                        Seller Registration\r\n                  </h1>\r\n                                </div>\r\n                            </div>\r\n\r\n\r\n\r\n                            <div className=\"form\">\r\n                                <FormGroup>\r\n                                    <div className=\"form-label\">\r\n                                        Enter Name --\r\n                      </div>\r\n                                    <div className=\"form-input\">\r\n                                        <FormControl\r\n                                            input='text'\r\n                                            value={this.state.name}\r\n                                            onChange={this.updateName}\r\n                                        />\r\n                                    </div>\r\n                                </FormGroup>\r\n\r\n                                <FormGroup>\r\n                                    <div className=\"form-label\">\r\n                                        Enter Age --\r\n                      </div>\r\n                                    <div className=\"form-input\">\r\n                                        <FormControl\r\n                                            input='text'\r\n                                            value={this.state.age}\r\n                                            onChange={this.updateAge}\r\n                                        />\r\n                                    </div>\r\n                                </FormGroup>\r\n\r\n                                <FormGroup>\r\n                                    <div className=\"form-label\">\r\n                                        Enter Aadhar Card No --\r\n                      </div>\r\n                                    <div className=\"form-input\">\r\n                                        <FormControl\r\n                                            input='text'\r\n                                            value={this.state.idNo}\r\n                                            onChange={this.updateIdno}\r\n                                        />\r\n                                    </div>\r\n                                </FormGroup>\r\n\r\n                                <FormGroup>\r\n                                    <div className=\"form-label\">\r\n                                        Enter Pan Card No --\r\n                      </div>\r\n                                    <div className=\"form-input\">\r\n                                        <FormControl\r\n                                            input='text'\r\n                                            value={this.state.kraPin}\r\n                                            onChange={this.updateKra}\r\n                                        />\r\n                                    </div>\r\n                                </FormGroup>\r\n\r\n                                <FormGroup>\r\n                                    <div className=\"form-label\">\r\n                                        Enter Owned Lands --\r\n                      </div>\r\n                                    <div className=\"form-input\">\r\n                                        <FormControl\r\n                                            input='text'\r\n                                            value={this.state.landsOwned}\r\n                                            onChange={this.updateOwnedLands}\r\n                                        />\r\n                                    </div>\r\n                                </FormGroup>\r\n\r\n                                <FormGroup>\r\n                                    <label>Attach your ID Card (PDF Format)</label>\r\n                                    <FormFile\r\n                                        id=\"File2\"\r\n                                        onChange={this.captureDoc}\r\n                                    />\r\n                                </FormGroup>\r\n\r\n\r\n                                <Button onClick={this.registerSeller} className=\"button-vote\">\r\n                                    Register as Seller\r\n                  </Button>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default RegisterSeller;\r\n"]},"metadata":{},"sourceType":"module"}