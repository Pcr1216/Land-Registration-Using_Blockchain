{"ast":null,"code":"var _jsxFileName = \"D:\\\\BE COMP SS\\\\Final Year Project\\\\5\\\\land2\\\\land2\\\\client\\\\src\\\\views\\\\BuyerInfo.js\";\nimport { LoadingContainer } from '@drizzle/react-components';\nimport { DrizzleProvider } from '@drizzle/react-plugin';\nimport React, { Component } from 'react';\nimport { Spinner } from 'react-bootstrap'; // reactstrap components\n\nimport { Button, Card, CardBody, CardHeader, CardTitle, Col, Row, Table } from \"reactstrap\";\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport Land from \"../artifacts/Land.json\";\nimport getWeb3 from \"../getWeb3\";\nimport '../index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst drizzleOptions = {\n  contracts: [Land]\n}; // var buyers = 0;\n// var sellers = 0;\n\nvar buyerTable = [];\nvar completed = true;\n\nfunction sendMail(email, name) {\n  // alert(typeof(name));\n  var tempParams = {\n    from_name: email,\n    to_name: name,\n    function: 'request and buy any land/property'\n  };\n  window.emailjs.send('service_vrxa1ak', 'template_zhc8m9h', tempParams).then(function (res) {\n    alert(\"Mail sent successfully\");\n  });\n}\n\nclass BuyerInfo extends Component {\n  constructor(props) {\n    super(props);\n\n    this.verifyBuyer = item => async () => {\n      //console.log(\"Hello\");\n      //console.log(item);\n      await this.state.LandInstance.methods.verifyBuyer(item).send({\n        from: this.state.account,\n        gas: 2100000\n      }); //Reload\n\n      window.location.reload(false);\n    };\n\n    this.NotverifyBuyer = (item, email, name) => async () => {\n      // alert('Before mail');\n      sendMail(email, name); // alert('After mail');\n\n      await new Promise(resolve => setTimeout(resolve, 10000));\n      await this.state.LandInstance.methods.rejectBuyer(item).send({\n        from: this.state.account,\n        gas: 2100000\n      });\n      window.location.reload(false);\n    };\n\n    this.componentDidMount = async () => {\n      //For refreshing page only once\n      if (!window.location.hash) {\n        window.location = window.location + '#loaded';\n        window.location.reload();\n      }\n\n      try {\n        //Get network provider and web3 instance\n        const web3 = await getWeb3();\n        const accounts = await web3.eth.getAccounts();\n        const currentAddress = await web3.currentProvider.selectedAddress; //console.log(currentAddress);\n\n        const networkId = await web3.eth.net.getId();\n        const deployedNetwork = Land.networks[networkId];\n        const instance = new web3.eth.Contract(Land.abi, deployedNetwork && deployedNetwork.address);\n        this.setState({\n          LandInstance: instance,\n          web3: web3,\n          account: accounts[0]\n        });\n        var buyersCount = await this.state.LandInstance.methods.getBuyersCount().call();\n        console.log(buyersCount);\n        var buyersMap = [];\n        buyersMap = await this.state.LandInstance.methods.getBuyer().call(); //console.log(buyersMap);\n\n        var verified = await this.state.LandInstance.methods.isLandInspector(currentAddress).call(); //console.log(verified);\n\n        this.setState({\n          verified: verified\n        });\n\n        for (let i = 0; i < buyersCount; i++) {\n          // var i =3;\n          var buyer = await this.state.LandInstance.methods.getBuyerDetails(buyersMap[i]).call();\n          var buyer_verify = await this.state.LandInstance.methods.isVerified(buyersMap[i]).call();\n          console.log(buyer_verify);\n          buyer.verified = buyer_verify;\n          var not_verify = await this.state.LandInstance.methods.isRejected(buyersMap[i]).call();\n          console.log(not_verify);\n          buyerTable.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: i + 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyersMap[i]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 53\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyer[0]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 76\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyer[5]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 95\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyer[4]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 114\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyer[1]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 133\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyer[6]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 152\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyer[2]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 171\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                href: `https://ipfs.io/${buyer[3]}`,\n                target: \"_blank\",\n                rel: \"noreferrer\",\n                children: \"Click Here\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 194\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 190\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: buyer.verified.toString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: this.verifyBuyer(buyersMap[i]),\n                disabled: buyer_verify || not_verify,\n                className: \"button-vote\",\n                children: \"Verify\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                onClick: this.NotverifyBuyer(buyersMap[i], buyer[4], buyer[0]),\n                disabled: buyer_verify || not_verify,\n                className: \"btn btn-danger\",\n                children: \"Reject\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 33\n          }, this));\n        }\n      } catch (error) {\n        // Catch any errors for any of the above operations.\n        alert(`Failed to load web3, accounts, or contract. Check console for details.`);\n        console.error(error);\n      }\n    };\n\n    this.state = {\n      LandInstance: undefined,\n      account: null,\n      web3: null,\n      buyers: 0,\n      verified: ''\n    };\n  }\n\n  render() {\n    if (!this.state.web3) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: /*#__PURE__*/_jsxDEV(Spinner, {\n              animation: \"border\",\n              variant: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (!this.state.verified) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"6\",\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                className: \"card-chart\",\n                children: /*#__PURE__*/_jsxDEV(CardBody, {\n                  children: /*#__PURE__*/_jsxDEV(\"h1\", {\n                    children: \"You are not verified to view this page\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(DrizzleProvider, {\n      options: drizzleOptions,\n      children: /*#__PURE__*/_jsxDEV(LoadingContainer, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              xs: \"12\",\n              children: /*#__PURE__*/_jsxDEV(Card, {\n                children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n                  children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                    tag: \"h5\",\n                    children: \"Buyers Info\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n                  children: /*#__PURE__*/_jsxDEV(Table, {\n                    className: \"tablesorter\",\n                    responsive: true,\n                    color: \"black\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      className: \"text-primary\",\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"#\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 209,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Account Address\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 210,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Name\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 211,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Age\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 212,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Email\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 213,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"City\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 214,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Aadhar Card Number\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 215,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Pan Card Number\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 216,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"ID Card Document\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 217,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Verification Status\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 218,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Verify Buyer\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 219,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Reject Buyer\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 220,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 208,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 207,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: buyerTable\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 223,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 206,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default BuyerInfo;","map":{"version":3,"sources":["D:/BE COMP SS/Final Year Project/5/land2/land2/client/src/views/BuyerInfo.js"],"names":["LoadingContainer","DrizzleProvider","React","Component","Spinner","Button","Card","CardBody","CardHeader","CardTitle","Col","Row","Table","Land","getWeb3","drizzleOptions","contracts","buyerTable","completed","sendMail","email","name","tempParams","from_name","to_name","function","window","emailjs","send","then","res","alert","BuyerInfo","constructor","props","verifyBuyer","item","state","LandInstance","methods","from","account","gas","location","reload","NotverifyBuyer","Promise","resolve","setTimeout","rejectBuyer","componentDidMount","hash","web3","accounts","eth","getAccounts","currentAddress","currentProvider","selectedAddress","networkId","net","getId","deployedNetwork","networks","instance","Contract","abi","address","setState","buyersCount","getBuyersCount","call","console","log","buyersMap","getBuyer","verified","isLandInspector","i","buyer","getBuyerDetails","buyer_verify","isVerified","not_verify","isRejected","push","toString","error","undefined","buyers","render"],"mappings":"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","sourcesContent":["import { LoadingContainer } from '@drizzle/react-components';\r\nimport { DrizzleProvider } from '@drizzle/react-plugin';\r\nimport React, { Component } from 'react';\r\nimport { Spinner } from 'react-bootstrap';\r\n// reactstrap components\r\nimport {\r\n    Button, Card, CardBody, CardHeader, CardTitle, Col, Row, Table\r\n} from \"reactstrap\";\r\nimport '../../node_modules/bootstrap/dist/css/bootstrap.min.css';\r\nimport Land from \"../artifacts/Land.json\";\r\nimport getWeb3 from \"../getWeb3\";\r\nimport '../index.css';\r\n\r\n\r\nconst drizzleOptions = {\r\n    contracts: [Land]\r\n}\r\n\r\n// var buyers = 0;\r\n// var sellers = 0;\r\nvar buyerTable = [];\r\nvar completed = true;\r\n\r\nfunction sendMail(email, name) {\r\n    // alert(typeof(name));\r\n\r\n    var tempParams = {\r\n        from_name: email,\r\n        to_name: name,\r\n        function: 'request and buy any land/property',\r\n    };\r\n\r\n    window.emailjs.send('service_vrxa1ak', 'template_zhc8m9h', tempParams)\r\n        .then(function (res) {\r\n            alert(\"Mail sent successfully\");\r\n        })\r\n}\r\n\r\nclass BuyerInfo extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            LandInstance: undefined,\r\n            account: null,\r\n            web3: null,\r\n            buyers: 0,\r\n            verified: '',\r\n        }\r\n    }\r\n\r\n\r\n    verifyBuyer = (item) => async () => {\r\n        //console.log(\"Hello\");\r\n        //console.log(item);\r\n\r\n        await this.state.LandInstance.methods.verifyBuyer(\r\n            item\r\n        ).send({\r\n            from: this.state.account,\r\n            gas: 2100000\r\n        });\r\n\r\n        //Reload\r\n        window.location.reload(false);\r\n\r\n    }\r\n\r\n    NotverifyBuyer = (item, email, name) => async () => {\r\n        // alert('Before mail');\r\n        sendMail(email, name);\r\n        // alert('After mail');\r\n\r\n        await new Promise(resolve => setTimeout(resolve, 10000));\r\n\r\n        await this.state.LandInstance.methods.rejectBuyer(\r\n            item\r\n        ).send({\r\n            from: this.state.account,\r\n            gas: 2100000\r\n        });\r\n\r\n        window.location.reload(false);\r\n    }\r\n\r\n    componentDidMount = async () => {\r\n        //For refreshing page only once\r\n        if (!window.location.hash) {\r\n            window.location = window.location + '#loaded';\r\n            window.location.reload();\r\n        }\r\n\r\n        try {\r\n            //Get network provider and web3 instance\r\n            const web3 = await getWeb3();\r\n\r\n            const accounts = await web3.eth.getAccounts();\r\n\r\n            const currentAddress = await web3.currentProvider.selectedAddress;\r\n            //console.log(currentAddress);\r\n            const networkId = await web3.eth.net.getId();\r\n            const deployedNetwork = Land.networks[networkId];\r\n            const instance = new web3.eth.Contract(\r\n                Land.abi,\r\n                deployedNetwork && deployedNetwork.address,\r\n            );\r\n\r\n            this.setState({ LandInstance: instance, web3: web3, account: accounts[0] });\r\n\r\n\r\n            var buyersCount = await this.state.LandInstance.methods.getBuyersCount().call();\r\n            console.log(buyersCount);\r\n\r\n\r\n            var buyersMap = [];\r\n            buyersMap = await this.state.LandInstance.methods.getBuyer().call();\r\n            //console.log(buyersMap);\r\n\r\n            var verified = await this.state.LandInstance.methods.isLandInspector(currentAddress).call();\r\n            //console.log(verified);\r\n            this.setState({ verified: verified });\r\n\r\n            for (let i = 0; i < buyersCount; i++) {\r\n                // var i =3;\r\n                var buyer = await this.state.LandInstance.methods.getBuyerDetails(buyersMap[i]).call();\r\n\r\n                var buyer_verify = await this.state.LandInstance.methods.isVerified(buyersMap[i]).call();\r\n                console.log(buyer_verify);\r\n                buyer.verified = buyer_verify;\r\n\r\n                var not_verify = await this.state.LandInstance.methods.isRejected(buyersMap[i]).call();\r\n                console.log(not_verify);\r\n                buyerTable.push(<tr><td>{i + 1}</td><td>{buyersMap[i]}</td><td>{buyer[0]}</td><td>{buyer[5]}</td><td>{buyer[4]}</td><td>{buyer[1]}</td><td>{buyer[6]}</td><td>{buyer[2]}</td><td><a href={`https://ipfs.io/${buyer[3]}`} target=\"_blank\" rel=\"noreferrer\">Click Here</a></td>\r\n                    <td>{buyer.verified.toString()}</td>\r\n                    <td>\r\n                        <Button onClick={this.verifyBuyer(buyersMap[i])} disabled={buyer_verify || not_verify} className=\"button-vote\">\r\n                            Verify\r\n                        </Button>\r\n                    </td>\r\n                    <td>\r\n                        <Button onClick={this.NotverifyBuyer(buyersMap[i], buyer[4], buyer[0])} disabled={buyer_verify || not_verify} className=\"btn btn-danger\">\r\n                            Reject\r\n                        </Button>\r\n                    </td>\r\n                </tr>)\r\n\r\n            }\r\n\r\n        } catch (error) {\r\n            // Catch any errors for any of the above operations.\r\n            alert(\r\n                `Failed to load web3, accounts, or contract. Check console for details.`,\r\n            );\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    render() {\r\n        if (!this.state.web3) {\r\n            return (\r\n                <div>\r\n                    <div>\r\n                        <h1>\r\n                            <Spinner animation=\"border\" variant=\"primary\" />\r\n                        </h1>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        }\r\n\r\n        if (!this.state.verified) {\r\n            return (\r\n                <div className=\"content\">\r\n                    <div>\r\n                        <Row>\r\n                            <Col xs=\"6\">\r\n                                <Card className=\"card-chart\">\r\n                                    <CardBody>\r\n                                        <h1>\r\n                                            You are not verified to view this page\r\n                                        </h1>\r\n                                    </CardBody>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <DrizzleProvider options={drizzleOptions}>\r\n                <LoadingContainer>\r\n                    <div className=\"content\">\r\n                        <Row>\r\n                            <Col xs=\"12\">\r\n                                <Card>\r\n                                    <CardHeader>\r\n                                        <CardTitle tag=\"h5\">Buyers Info</CardTitle>\r\n                                    </CardHeader>\r\n                                    <CardBody>\r\n                                        <Table className=\"tablesorter\" responsive color=\"black\">\r\n                                            <thead className=\"text-primary\">\r\n                                                <tr>\r\n                                                    <th>#</th>\r\n                                                    <th>Account Address</th>\r\n                                                    <th>Name</th>\r\n                                                    <th>Age</th>\r\n                                                    <th>Email</th>\r\n                                                    <th>City</th>\r\n                                                    <th>Aadhar Card Number</th>\r\n                                                    <th>Pan Card Number</th>\r\n                                                    <th>ID Card Document</th>\r\n                                                    <th>Verification Status</th>\r\n                                                    <th>Verify Buyer</th>\r\n                                                    <th>Reject Buyer</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                {buyerTable}\r\n                                            </tbody>\r\n\r\n                                        </Table>\r\n                                    </CardBody>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n                </LoadingContainer>\r\n            </DrizzleProvider>\r\n        );\r\n\r\n    }\r\n}\r\n\r\nexport default BuyerInfo;\r\n"]},"metadata":{},"sourceType":"module"}