{"ast":null,"code":"'use strict';\n\nconst sort = require('stable');\n\nconst {\n  serialize\n} = require('../util.js');\n\nconst dagNodeUtil = require('./util.js');\n\nconst linkSort = dagNodeUtil.linkSort;\n\nconst DAGNode = require('./index.js');\n\nconst DAGLink = require('../dag-link');\n\nfunction create(data, links, callback) {\n  if (typeof data === 'function') {\n    callback = data;\n    data = undefined;\n  } else if (typeof data === 'string') {\n    data = Buffer.from(data);\n  }\n\n  if (typeof links === 'function') {\n    callback = links;\n    links = [];\n  }\n\n  if (!Buffer.isBuffer(data)) {\n    return callback(new Error('Passed \\'data\\' is not a buffer or a string!'));\n  }\n\n  links = links.map(link => {\n    return DAGLink.isDAGLink(link) ? link : DAGLink.util.createDagLinkFromB58EncodedHash(link);\n  });\n  links = sort(links, linkSort);\n  serialize({\n    data,\n    links\n  }, (err, buffer) => {\n    if (err) {\n      return callback(err);\n    }\n\n    return callback(null, new DAGNode(data, links, buffer.length));\n  });\n}\n\nmodule.exports = create;","map":{"version":3,"sources":["D:/BE COMP SS/Final Year Project/5/land2/land2/client/node_modules/ipld-dag-pb/src/dag-node/create.js"],"names":["sort","require","serialize","dagNodeUtil","linkSort","DAGNode","DAGLink","create","data","links","callback","undefined","Buffer","from","isBuffer","Error","map","link","isDAGLink","util","createDagLinkFromB58EncodedHash","err","buffer","length","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACA,MAAM;AACJC,EAAAA;AADI,IAEFD,OAAO,CAAC,YAAD,CAFX;;AAGA,MAAME,WAAW,GAAGF,OAAO,CAAC,WAAD,CAA3B;;AACA,MAAMG,QAAQ,GAAGD,WAAW,CAACC,QAA7B;;AACA,MAAMC,OAAO,GAAGJ,OAAO,CAAC,YAAD,CAAvB;;AACA,MAAMK,OAAO,GAAGL,OAAO,CAAC,aAAD,CAAvB;;AAEA,SAASM,MAAT,CAAiBC,IAAjB,EAAuBC,KAAvB,EAA8BC,QAA9B,EAAwC;AACtC,MAAI,OAAOF,IAAP,KAAgB,UAApB,EAAgC;AAC9BE,IAAAA,QAAQ,GAAGF,IAAX;AACAA,IAAAA,IAAI,GAAGG,SAAP;AACD,GAHD,MAGO,IAAI,OAAOH,IAAP,KAAgB,QAApB,EAA8B;AACnCA,IAAAA,IAAI,GAAGI,MAAM,CAACC,IAAP,CAAYL,IAAZ,CAAP;AACD;;AACD,MAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC;AAC/BC,IAAAA,QAAQ,GAAGD,KAAX;AACAA,IAAAA,KAAK,GAAG,EAAR;AACD;;AAED,MAAI,CAACG,MAAM,CAACE,QAAP,CAAgBN,IAAhB,CAAL,EAA4B;AAC1B,WAAOE,QAAQ,CAAC,IAAIK,KAAJ,CAAU,8CAAV,CAAD,CAAf;AACD;;AAEDN,EAAAA,KAAK,GAAGA,KAAK,CAACO,GAAN,CAAWC,IAAD,IAAU;AAC1B,WAAOX,OAAO,CAACY,SAAR,CAAkBD,IAAlB,IAA0BA,IAA1B,GAAiCX,OAAO,CAACa,IAAR,CAAaC,+BAAb,CAA6CH,IAA7C,CAAxC;AACD,GAFO,CAAR;AAGAR,EAAAA,KAAK,GAAGT,IAAI,CAACS,KAAD,EAAQL,QAAR,CAAZ;AAEAF,EAAAA,SAAS,CAAC;AACRM,IAAAA,IADQ;AACFC,IAAAA;AADE,GAAD,EAEN,CAACY,GAAD,EAAMC,MAAN,KAAiB;AAClB,QAAID,GAAJ,EAAS;AACP,aAAOX,QAAQ,CAACW,GAAD,CAAf;AACD;;AAED,WAAOX,QAAQ,CAAC,IAAD,EAAO,IAAIL,OAAJ,CAAYG,IAAZ,EAAkBC,KAAlB,EAAyBa,MAAM,CAACC,MAAhC,CAAP,CAAf;AACD,GARQ,CAAT;AASD;;AAEDC,MAAM,CAACC,OAAP,GAAiBlB,MAAjB","sourcesContent":["'use strict'\n\nconst sort = require('stable')\nconst {\n  serialize\n} = require('../util.js')\nconst dagNodeUtil = require('./util.js')\nconst linkSort = dagNodeUtil.linkSort\nconst DAGNode = require('./index.js')\nconst DAGLink = require('../dag-link')\n\nfunction create (data, links, callback) {\n  if (typeof data === 'function') {\n    callback = data\n    data = undefined\n  } else if (typeof data === 'string') {\n    data = Buffer.from(data)\n  }\n  if (typeof links === 'function') {\n    callback = links\n    links = []\n  }\n\n  if (!Buffer.isBuffer(data)) {\n    return callback(new Error('Passed \\'data\\' is not a buffer or a string!'))\n  }\n\n  links = links.map((link) => {\n    return DAGLink.isDAGLink(link) ? link : DAGLink.util.createDagLinkFromB58EncodedHash(link)\n  })\n  links = sort(links, linkSort)\n\n  serialize({\n    data, links\n  }, (err, buffer) => {\n    if (err) {\n      return callback(err)\n    }\n\n    return callback(null, new DAGNode(data, links, buffer.length))\n  })\n}\n\nmodule.exports = create\n"]},"metadata":{},"sourceType":"script"}