{"ast":null,"code":"'use strict';\n\nconst dagNodeUtil = require('./util');\n\nconst cloneLinks = dagNodeUtil.cloneLinks;\nconst cloneData = dagNodeUtil.cloneData;\nconst toDAGLink = dagNodeUtil.toDAGLink;\n\nconst DAGLink = require('../dag-link');\n\nconst DAGNode = require('./index');\n\nconst create = require('./create');\n\nfunction asDAGLink(link, callback) {\n  if (DAGLink.isDAGLink(link)) {\n    // It's a DAGLink instance\n    // no need to do anything\n    return callback(null, link);\n  }\n\n  if (DAGNode.isDAGNode(link)) {\n    // It's a DAGNode instance\n    // convert to link\n    return toDAGLink(link, {}, callback);\n  } // It's a Object with name, multihash/hash/cid and size\n\n\n  try {\n    callback(null, new DAGLink(link.name, link.size, link.multihash || link.hash || link.cid));\n  } catch (err) {\n    return callback(err);\n  }\n}\n\nfunction addLink(node, link, callback) {\n  const links = cloneLinks(node);\n  const data = cloneData(node);\n  asDAGLink(link, (error, link) => {\n    if (error) {\n      return callback(error);\n    }\n\n    links.push(link);\n    create(data, links, callback);\n  });\n}\n\nmodule.exports = addLink;","map":{"version":3,"sources":["D:/BE COMP SS/Final Year Project/5/land2/land2/client/node_modules/ipld-dag-pb/src/dag-node/addLink.js"],"names":["dagNodeUtil","require","cloneLinks","cloneData","toDAGLink","DAGLink","DAGNode","create","asDAGLink","link","callback","isDAGLink","isDAGNode","name","size","multihash","hash","cid","err","addLink","node","links","data","error","push","module","exports"],"mappings":"AAAA;;AAEA,MAAMA,WAAW,GAAGC,OAAO,CAAC,QAAD,CAA3B;;AACA,MAAMC,UAAU,GAAGF,WAAW,CAACE,UAA/B;AACA,MAAMC,SAAS,GAAGH,WAAW,CAACG,SAA9B;AACA,MAAMC,SAAS,GAAGJ,WAAW,CAACI,SAA9B;;AACA,MAAMC,OAAO,GAAGJ,OAAO,CAAC,aAAD,CAAvB;;AACA,MAAMK,OAAO,GAAGL,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAMM,MAAM,GAAGN,OAAO,CAAC,UAAD,CAAtB;;AAEA,SAASO,SAAT,CAAoBC,IAApB,EAA0BC,QAA1B,EAAoC;AAClC,MAAIL,OAAO,CAACM,SAAR,CAAkBF,IAAlB,CAAJ,EAA6B;AAC3B;AACA;AAEA,WAAOC,QAAQ,CAAC,IAAD,EAAOD,IAAP,CAAf;AACD;;AAED,MAAIH,OAAO,CAACM,SAAR,CAAkBH,IAAlB,CAAJ,EAA6B;AAC3B;AACA;AACA,WAAOL,SAAS,CAACK,IAAD,EAAO,EAAP,EAAWC,QAAX,CAAhB;AACD,GAZiC,CAclC;;;AACA,MAAI;AACFA,IAAAA,QAAQ,CAAC,IAAD,EAAO,IAAIL,OAAJ,CAAYI,IAAI,CAACI,IAAjB,EAAuBJ,IAAI,CAACK,IAA5B,EAAkCL,IAAI,CAACM,SAAL,IAAkBN,IAAI,CAACO,IAAvB,IAA+BP,IAAI,CAACQ,GAAtE,CAAP,CAAR;AACD,GAFD,CAEE,OAAOC,GAAP,EAAY;AACZ,WAAOR,QAAQ,CAACQ,GAAD,CAAf;AACD;AACF;;AAED,SAASC,OAAT,CAAkBC,IAAlB,EAAwBX,IAAxB,EAA8BC,QAA9B,EAAwC;AACtC,QAAMW,KAAK,GAAGnB,UAAU,CAACkB,IAAD,CAAxB;AACA,QAAME,IAAI,GAAGnB,SAAS,CAACiB,IAAD,CAAtB;AAEAZ,EAAAA,SAAS,CAACC,IAAD,EAAO,CAACc,KAAD,EAAQd,IAAR,KAAiB;AAC/B,QAAIc,KAAJ,EAAW;AACT,aAAOb,QAAQ,CAACa,KAAD,CAAf;AACD;;AAEDF,IAAAA,KAAK,CAACG,IAAN,CAAWf,IAAX;AACAF,IAAAA,MAAM,CAACe,IAAD,EAAOD,KAAP,EAAcX,QAAd,CAAN;AACD,GAPQ,CAAT;AAQD;;AAEDe,MAAM,CAACC,OAAP,GAAiBP,OAAjB","sourcesContent":["'use strict'\n\nconst dagNodeUtil = require('./util')\nconst cloneLinks = dagNodeUtil.cloneLinks\nconst cloneData = dagNodeUtil.cloneData\nconst toDAGLink = dagNodeUtil.toDAGLink\nconst DAGLink = require('../dag-link')\nconst DAGNode = require('./index')\nconst create = require('./create')\n\nfunction asDAGLink (link, callback) {\n  if (DAGLink.isDAGLink(link)) {\n    // It's a DAGLink instance\n    // no need to do anything\n\n    return callback(null, link)\n  }\n\n  if (DAGNode.isDAGNode(link)) {\n    // It's a DAGNode instance\n    // convert to link\n    return toDAGLink(link, {}, callback)\n  }\n\n  // It's a Object with name, multihash/hash/cid and size\n  try {\n    callback(null, new DAGLink(link.name, link.size, link.multihash || link.hash || link.cid))\n  } catch (err) {\n    return callback(err)\n  }\n}\n\nfunction addLink (node, link, callback) {\n  const links = cloneLinks(node)\n  const data = cloneData(node)\n\n  asDAGLink(link, (error, link) => {\n    if (error) {\n      return callback(error)\n    }\n\n    links.push(link)\n    create(data, links, callback)\n  })\n}\n\nmodule.exports = addLink\n"]},"metadata":{},"sourceType":"script"}